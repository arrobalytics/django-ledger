{% load static %}
{% load django_ledger %}
{% load cache %}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% session_entity_name %} | {{ page_title }}</title>
    <script src="{% static 'django_ledger/bundle/styles.bundle.js' %}"></script>
    <link rel="shortcut icon" type="image/jpg" href="{% static 'django_ledger/logo/favicon.png' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'django_ledger/css/cards.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'django_ledger/css/nav.css' %}">

    <style>
            .sidenav {
  height: 100%;
  width: 20% !important;

  z-index: 1;
  top: 0;
  left: 0;
  overflow-x: hidden;
  padding-top: 20px;
}
.sidecontent {

height: 100%;
  background-color: #F1F1F1;
  margin-bottom: 0px !important;
    width: 80% !important;

}

    </style>
</head>

<body>
    {% include 'django_ledger/includes/nav.html' %}
    <h1>Test</h1>
    <div class="block columns" style="background-color: red;">
        <div class="column is-2 sidenav">
            {% navigation_menu 'desktop' %}
           {% if view.kwargs.unit_slug or request.GET.unit %}
               {% period_navigation 'unit-dashboard' %}
                 {% else %}
              {% period_navigation 'entity-dashboard' %}
                 {% endif %}

    </div>
    <div class="block column is-10 sidecontent">
    {% block content %}{% endblock %}
   </div>
{% block footer %}
    {% include 'django_ledger/includes/footer.html' %}
{% endblock %}
    </div>
    <script src = "{% static 'django_ledger/js/card.js' %}"></script>
    <script src = "{% static 'django_ledger/js/nav.js' %}"></script>
    <script src="{% static 'django_ledger/bundle/djetler.bundle.js' %}"></script>


{% block script_bottom %}
    <script src="{% static 'django_ledger/bundle/djetler.bundle.js' %}"></script>

    <script>
        {% if entity_slug %}
            let entitySlug = "{{ view.kwargs.entity_slug }}"
        {% endif %}

        {% if from_date and to_date %}
            let fromDate = "{{ from_date | date:'Y-m-d' }}";
            let toDate = "{{ to_date | date:'Y-m-d' }}";
        {% endif %}

        {% if date_navigation_url %}
            let dateNavigationUrl = "{{ date_navigation_url }}"
            let datePickers = document.querySelectorAll("[id^='djl-datepicker']")
            datePickers.forEach(dp => djLedger.getCalendar(dp.attributes.id.value, dateNavigationUrl))
        {% endif %}
    </script>
    {% endblock %}
    <script src = "{% static 'django_ledger/js/card.js' %}"></script>
    <script src = "{% static 'django_ledger/js/nav.js' %}"></script>



</body>
</html>